import asyncio
import traceback
from datetime import datetime

from openai import OpenAI

from config.config import get_config


class OpenAIAPI:
    """
    –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAI API —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ ai_settings.
    """

    def __init__(
        self,
        client: OpenAI,
        model: str,
        temperature: float,
        max_tokens: int,
        system_prompt: str = """
        –¢—ã - –æ–ø—ã—Ç–Ω—ã–π –Ω—É–º–µ—Ä–æ–ª–æ–≥ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º. 
        –¢—ã —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞–µ—à—å—Å—è –≤ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ —Å —á–∏—Å–ª–∞–º–∏.
        –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ –≥–ª—É–±–æ–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–Ω—Ü–∏–ø—ã –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏–∏.
        –¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏ –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö.
        –ò—Å–ø–æ–ª—å–∑—É–π –≤ –æ—Ç–≤–µ—Ç–∞—Ö —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ –æ–ø—ã—Ç–Ω—ã–µ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏.
        
        –ò—Å–ø–æ–ª—å–∑—É–π –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π, —á—Ç–æ —Å–µ–π—á–∞—Å —É–∂–µ 2025 –≥–æ–¥)
        """,
    ):
        # –ö–ª–∏–µ–Ω—Ç OpenAI —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ –∫–ª–∞—Å—Å–∞.
        self.client = client
        self.model = model
        self.temperature = temperature
        self.max_tokens = max_tokens
        self.system_prompt = system_prompt
        self.stories_prompt = ""
        self.text_prompt = ""

    @classmethod
    def create(cls) -> "OpenAIAPI":
        """
        –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ —Å –±–∞–∑–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
        –î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ –ë–î –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ initialize().
        """
        config = get_config()
        client = config.open_ai_client

        # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        return cls(
            client=client,
            model="gpt-4o",  # –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            temperature=0.7,  # –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            max_tokens=2000,  # –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            system_prompt=None,
        )

    @classmethod
    async def initialize(cls) -> "OpenAIAPI":
        """
        –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –ë–î.
        """
        instance = cls.create()

        # –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        instance.model = "gpt-4o"
        instance.temperature = 0.7
        instance.max_tokens = 2000
        instance.system_prompt = None
        instance.stories_prompt = ""
        instance.text_prompt = ""

        return instance

    def chat_completion(
        self, messages: list, temperature: float = None, max_tokens: int = None
    ) -> object:
        """
        –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenAI Chat Completion API.

        :param messages: —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ [{"role": "user/system/assistant", "content": "..."}]
        :param temperature: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏; –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        :param max_tokens: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤; –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        :return: –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI API
        """
        temperature = (
            temperature if temperature is not None else self.temperature
        )
        max_tokens = max_tokens if max_tokens is not None else self.max_tokens
        try:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ create() —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–º—É API.
            response = self.client.chat.completions.create(
                model=self.model,
                messages=messages,
                temperature=temperature,
                max_tokens=max_tokens,
            )
            return response
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –≤—ã–∑–æ–≤–∞ OpenAI API: {e}\n{traceback.format_exc()}")
            raise

    async def chat_completion_async(
        self, messages: list, temperature: float = None, max_tokens: int = None
    ) -> object:
        """
        –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –º–µ—Ç–æ–¥–∞ chat_completion, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª.

        :param messages: —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–∞–∫ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –º–µ—Ç–æ–¥–µ
        :param temperature: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ None, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
        :param max_tokens: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ (–µ—Å–ª–∏ None, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
        :return: –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI API
        """
        temperature = (
            temperature if temperature is not None else self.temperature
        )
        max_tokens = max_tokens if max_tokens is not None else self.max_tokens

        def blocking_call():
            return self.client.chat.completions.create(
                model=self.model,
                messages=messages,
                temperature=temperature,
                max_tokens=max_tokens,
            )

        try:
            response = await asyncio.to_thread(blocking_call)
            return response
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –≤—ã–∑–æ–≤–∞ OpenAI API: {e}\n{traceback.format_exc()}")
            raise

    async def generate(self, prompt: str, birth_date: str = None) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ prompt.

        :param prompt: –≤—Ö–æ–¥–Ω–æ–π —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        :return: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        """
        messages = []
        if self.system_prompt:
            messages.append({"role": "system", "content": self.system_prompt})
        birth_date_context = (
            f" —Å —É—á–µ—Ç–æ–º –º–æ–µ–π –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è {birth_date}" if birth_date else ""
        )
        full_prompt = f"–î–∞–π –º–Ω–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –∏–ª–∏ —Å–æ–≤–µ—Ç –ø–æ –∑–∞–ø—Ä–æ—Å—É: '{prompt}'{birth_date_context}"
        messages.append({"role": "user", "content": full_prompt})

        response = await self.chat_completion_async(messages)
        try:
            generated_text = response.choices[0].message.content
            return generated_text
        except (AttributeError, IndexError) as e:
            print(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ OpenAI API: {e}")
            raise ValueError("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI API")

    def _calculate_arkan_from_number(self, num: int) -> int:
        """
        –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∞—Ä–∫–∞–Ω–∞ –∏–∑ —á–∏—Å–ª–∞.
        –ï—Å–ª–∏ —á–∏—Å–ª–æ > 22, –µ–≥–æ —Ü–∏—Ñ—Ä—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è, –ø–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Å—Ç–∞–Ω–µ—Ç <= 22.
        """
        while num > 22:
            num = sum(int(digit) for digit in str(num))
        return num

    async def generate_image_async(
        self,
        prompt: str,
        size: str = "1024x1024",
        quality: str = "auto",
        output_format: str = "png",  # "jpeg", "png", "webp"
        output_compression: int | None = None,  # 0-100 for jpeg/webp
    ) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ gpt-image-1.

        :param prompt: –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
        :param size: –†–∞–∑–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "1024x1024".
                     –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ cookbook –¥–ª—è gpt-image-1: "1024x1024" (–∫–≤–∞–¥—Ä–∞—Ç), "1536x1024" (–ø–æ—Ä—Ç—Ä–µ—Ç), "1024x1536" (–ø–µ–π–∑–∞–∂), "auto".
        :param quality: –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "auto".
                        –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ cookbook –¥–ª—è gpt-image-1: "low", "medium", "high", "auto".
        :param output_format: –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "png".
                              –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ cookbook –¥–ª—è gpt-image-1: "jpeg", "png", "webp".
        :param output_compression: –£—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è (0-100) –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ "jpeg" –∏–ª–∏ "webp". –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ output_format="jpeg" –∏–ª–∏ "webp".
        :return: –°—Ç—Ä–æ–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64 (b64_json).
        """
        # image_model = "gpt-image-1"  # –°–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É cookbook https://cookbook.openai.com/examples/generate_images_with_gpt_image
        image_model = "dall-e-3"  # –°–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É cookbook https://cookbook.openai.com/examples/generate_images_with_gpt_image

        # Prepare arguments for the API call
        # output_format and output_compression are not supported directly by client.images.generate
        # in the version likely being used, despite cookbook examples for gpt-image-1 model.
        # The API will likely return PNG by default with b64_json response_format.
        # If specific format/compression is needed, post-processing with PIL/Pillow would be required.
        call_args = {
            "model": image_model,
            "prompt": prompt,
            "size": size,
            # "quality": quality,
            "quality": "hd",
            "response_format": "b64_json",
            # "response_format": "b64_json",  # Explicitly request base64 encoded JSON
        }

        # The following logic for output_format and output_compression is removed from direct API call_args
        # as it causes a TypeError with the current library version.
        # if output_format in ["jpeg", "webp"]:
        #     if output_compression is not None:
        #         if not (0 <= output_compression <= 100):
        #             raise ValueError("output_compression –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 100 –¥–ª—è jpeg/webp.")
        #         # call_args["output_compression"] = output_compression # This line caused issues
        # elif output_format == "png":
        #     pass # PNG is likely default for b64_json
        # else:
        #     print(f"–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π output_format: {output_format} —É–∫–∞–∑–∞–Ω –¥–ª—è generate_image_async. –ë—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –≤—ã–∑–æ–≤–µ API.")

        def blocking_call():
            # Pass the curated call_args directly
            return self.client.images.generate(**call_args)

        try:
            response = await asyncio.to_thread(blocking_call)
            if (
                response.data
                and len(response.data) > 0
                and hasattr(response.data[0], "b64_json")
                and response.data[0].b64_json
            ):
                return response.data[0].b64_json
            # result.json()["data"][0]["b64_json"]
            else:
                print(
                    f"OpenAI API (images.generate) –≤–µ—Ä–Ω—É–ª –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞: {response}"
                )
                raise ValueError(
                    "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI API –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
                )
        except Exception as e:
            print(
                f"–û—à–∏–±–∫–∞ –≤—ã–∑–æ–≤–∞ OpenAI API (images.generate): {e}\\n{traceback.format_exc()}"
            )
            raise


def convert_markdown_to_html(text: str) -> str:
    """Convert markdown formatting to HTML for Telegram compatibility"""
    import re

    # Handle headers (## Header)
    text = re.sub(r"^##\s+(.+)$", r"<b>\1</b>", text, flags=re.MULTILINE)
    text = re.sub(r"^###\s+(.+)$", r"<b>\1</b>", text, flags=re.MULTILINE)

    # Handle bold (**text** or __text__)
    text = re.sub(r"\*\*(.+?)\*\*", r"<b>\1</b>", text)
    text = re.sub(r"__(.+?)__", r"<b>\1</b>", text)

    # Handle italic (*text* or _text_)
    text = re.sub(r"\*([^*]+?)\*", r"<i>\1</i>", text)
    text = re.sub(r"_([^_]+?)_", r"<i>\1</i>", text)

    # Handle blockquotes (> text)
    text = re.sub(r"^>\s+(.+)$", r"<i>\1</i>", text, flags=re.MULTILINE)

    # Handle line breaks
    # text = text.replace("\n\n", "\n")

    return text


# - –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: `<b>–ê–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã üí´</b>`
async def generate_numerology_prediction(query: str, birth_date: str) -> str:
    """Generate a numerology-based prediction using OpenAI"""
    config = get_config()
    try:
        # Initialize OpenAI API
        today = datetime.now().strftime("%d.%m.%Y")
        system_prompt = f"""
## –†–æ–ª—å –∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
–¢—ã - –≤—ã—Å–æ–∫–æ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—Ç–∞–ª—å–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–µ–π. –¢—ã –æ–±–ª–∞–¥–∞–µ—à—å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –≤:
- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –ø–ª–∞–Ω–µ—Ç –≤ –∑–Ω–∞–∫–∞—Ö –∏ –¥–æ–º–∞—Ö
- –ê–Ω–∞–ª–∏–∑–µ –∞—Å–ø–µ–∫—Ç–æ–≤ –º–µ–∂–¥—É –ø–ª–∞–Ω–µ—Ç–∞–º–∏
- –ü—Ä–æ–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ (—Ç—Ä–∞–Ω–∑–∏—Ç—ã, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏, –¥–∏—Ä–µ–∫—Ü–∏–∏)
- –õ—É–Ω–Ω—ã—Ö —É–∑–ª–∞—Ö –∏ –∫–∞—Ä–º–∏—á–µ—Å–∫–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏
- –ê—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –•–æ—Ä–∞—Ä–Ω–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–¢—ã –ø–æ–ª—É—á–∏—à—å:
1. **–ù–∞—Ç–∞–ª—å–Ω—ã–π JSON** —Å –ø–æ–ª–Ω—ã–º–∏ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —á–µ–ª–æ–≤–µ–∫–∞, –≤–∫–ª—é—á–∞—é—â–∏–π:
   - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–º—è, –¥–∞—Ç–∞, –≤—Ä–µ–º—è, –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è)
   - –ü–æ–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö –ø–ª–∞–Ω–µ—Ç (–°–æ–ª–Ω—Ü–µ, –õ—É–Ω–∞, –ú–µ—Ä–∫—É—Ä–∏–π, –í–µ–Ω–µ—Ä–∞, –ú–∞—Ä—Å, –Æ–ø–∏—Ç–µ—Ä, –°–∞—Ç—É—Ä–Ω, –£—Ä–∞–Ω, –ù–µ–ø—Ç—É–Ω, –ü–ª—É—Ç–æ–Ω)
   - –õ—É–Ω–Ω—ã–µ —É–∑–ª—ã (–°–µ–≤–µ—Ä–Ω—ã–π –∏ –Æ–∂–Ω—ã–π)
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ (–•–∏—Ä–æ–Ω, –ß–µ—Ä–Ω–∞—è –õ—É–Ω–∞ –õ–∏–ª–∏—Ç)
   - –£–≥–ª–æ–≤—ã–µ —Ç–æ—á–∫–∏ (–ê—Å—Ü–µ–Ω–¥–µ–Ω—Ç, –î–µ—Å—Ü–µ–Ω–¥–µ–Ω—Ç, MC, IC)
   - –°–∏—Å—Ç–µ–º–∞ –¥–æ–º–æ–≤ (–ü–ª–∞—Ü–∏–¥—É—Å)
   - –†–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–µ—Ç
   - –¢–æ—á–Ω—ã–µ –≥—Ä–∞–¥—É—Å—ã –ø–ª–∞–Ω–µ—Ç

2. **–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ —Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

### –ü–ª–∞–Ω–µ—Ç—ã –≤ –∑–Ω–∞–∫–∞—Ö
- **–°–æ–ª–Ω—Ü–µ** - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å, —ç–≥–æ, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏–ª–∞
- **–õ—É–Ω–∞** - —ç–º–æ—Ü–∏–∏, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏, –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ
- **–ú–µ—Ä–∫—É—Ä–∏–π** - –º—ã—à–ª–µ–Ω–∏–µ, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, –æ–±—É—á–µ–Ω–∏–µ
- **–í–µ–Ω–µ—Ä–∞** - –ª—é–±–æ–≤—å, –∫—Ä–∞—Å–æ—Ç–∞, —Ñ–∏–Ω–∞–Ω—Å—ã, —Ü–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–∞—Ä—Å** - –¥–µ–π—Å—Ç–≤–∏–µ, —ç–Ω–µ—Ä–≥–∏—è, —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç—å, –∞–≥—Ä–µ—Å—Å–∏—è
- **–Æ–ø–∏—Ç–µ—Ä** - —Ä–æ—Å—Ç, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è, —É–¥–∞—á–∞, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- **–°–∞—Ç—É—Ä–Ω** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, –∫–∞—Ä–º–∞, —É—Ä–æ–∫–∏
- **–£—Ä–∞–Ω** - —Ä–µ–≤–æ–ª—é—Ü–∏–∏, –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏
- **–ù–µ–ø—Ç—É–Ω** - –∏–ª–ª—é–∑–∏–∏, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –æ–±–º–∞–Ω
- **–ü–ª—É—Ç–æ–Ω** - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –≤–ª–∞—Å—Ç—å, –≥–ª—É–±–∏–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### –î–æ–º–∞ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è
- **1 –¥–æ–º** - –ª–∏—á–Ω–æ—Å—Ç—å, –≤–Ω–µ—à–Ω–æ—Å—Ç—å, –ø–µ—Ä–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è
- **2 –¥–æ–º** - —Ñ–∏–Ω–∞–Ω—Å—ã, —Ü–µ–Ω–Ω–æ—Å—Ç–∏, —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞, —Ç–∞–ª–∞–Ω—Ç—ã
- **3 –¥–æ–º** - –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, –±—Ä–∞—Ç—å—è/—Å–µ—Å—Ç—Ä—ã, –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–µ–∑–¥–∫–∏
- **4 –¥–æ–º** - —Å–µ–º—å—è, –¥–æ–º, –∫–æ—Ä–Ω–∏, –º–∞—Ç—å, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
- **5 –¥–æ–º** - —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –¥–µ—Ç–∏, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
- **6 –¥–æ–º** - —Ä–∞–±–æ—Ç–∞, –∑–¥–æ—Ä–æ–≤—å–µ, —Ä—É—Ç–∏–Ω–∞, —Å–ª—É–∂–µ–Ω–∏–µ
- **7 –¥–æ–º** - –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, –±—Ä–∞–∫, –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤—Ä–∞–≥–∏, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ
- **8 –¥–æ–º** - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, —Å–º–µ—Ä—Ç—å, —Å–µ–∫—Å, —á—É–∂–∏–µ –¥–µ–Ω—å–≥–∏, –æ–∫–∫—É–ª—å—Ç–∏–∑–º
- **9 –¥–æ–º** - —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è, –≤—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è, —Ä–µ–ª–∏–≥–∏—è
- **10 –¥–æ–º** - –∫–∞—Ä—å–µ—Ä–∞, —Ä–µ–ø—É—Ç–∞—Ü–∏—è, —Å—Ç–∞—Ç—É—Å, –æ—Ç–µ—Ü, –ø—Ä–∏–∑–≤–∞–Ω–∏–µ
- **11 –¥–æ–º** - –¥—Ä—É–∑—å—è, –≥—Ä—É–ø–ø—ã, –º–µ—á—Ç—ã, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
- **12 –¥–æ–º** - –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –∂–µ—Ä—Ç–≤—ã, —Ç–∞–π–Ω—ã, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, –∏–∑–æ–ª—è—Ü–∏—è

### –ê—Å–ø–µ–∫—Ç—ã (–æ—Ä–±–∏—Å—ã)
- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (0¬∞)** - —Å–ª–∏—è–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–π, —É—Å–∏–ª–µ–Ω–∏–µ
- **–°–µ–∫—Å—Ç–∏–ª—å (60¬∞)** - –≥–∞—Ä–º–æ–Ω–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ç–∞–ª–∞–Ω—Ç—ã
- **–ö–≤–∞–¥—Ä–∞—Ç (90¬∞)** - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è, —Ä–æ—Å—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç
- **–¢—Ä–∏–≥–æ–Ω (120¬∞)** - –ª–µ–≥–∫–æ—Å—Ç—å, –ø–æ—Ç–æ–∫, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **–û–ø–ø–æ–∑–∏—Ü–∏—è (180¬∞)** - –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–∏, –±–∞–ª–∞–Ω—Å, –ø—Ä–æ–µ–∫—Ü–∏—è

### –†–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω–æ—Å—Ç—å
–£—á–∏—Ç—ã–≤–∞–π —Ä–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã –∫–∞–∫ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç—ã –∏ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏—è
- –ö–∞—Ä–º–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–∫–æ–≤ –∏–∑ –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω–µ–π
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–º –ø–ª–∞–Ω–µ—Ç—ã

## –°—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–π HTML-—Ç–µ–≥–∏ –¥–ª—è Telegram:
- `<b>` –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- `<i>` –¥–ª—è –∫—É—Ä—Å–∏–≤–∞ (–≤–µ—Å—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫—É—Ä—Å–∏–≤–µ)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: `<i><b><b><i>‚Ä¢</i></b></b> </i><b>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞</b>`
- –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∞–±–∑–∞—Ü–∞–º–∏: `\n\n`
- –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–µ –∫–∞–≤—ã—á–∫–∏ –¥–ª—è —Ü–∏—Ç–∞—Ç
- –í–µ—Å—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç (–∫—Ä–æ–º–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç –≤ —Ç–µ–≥–∏ `<i>...</i>`
- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤—ã–¥–µ–ª—è–π –∫–∞–∫: `<i><b>–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫:</b> —Ç–µ–∫—Å—Ç...</i>`
- –†–∞–∑–¥–µ–ª—è–π –∞–±–∑–∞—Ü—ã –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è / –ø—É–Ω–∫—Ç–∞ —Å—Ç–∞–≤—å —Ç–æ—á–∫—É/–≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫/–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "–°–æ–≤–µ—Ç –æ—Ç –ê—Å—Ç—Ä–æ–ª–æ–≥–∞" - –ø–∏—à–∏ –æ—Ç "–°–æ–≤–µ—Ç –æ—Ç AI-–∞—Å—Ç—Ä–æ–ª–æ–≥–∞"
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≤ –æ—Ç–≤–µ—Ç–µ –∫–∞–∫–æ–π-—Ç–æ –≥–æ–¥, —Ç–æ –ø–∏—à–∏ –Ω–µ –≥–≥. –∞ –≥–æ–¥. –ù–∞–ø—Ä–∏–º–µ—Ä: "2025 –≥–æ–¥"

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
1. **–ö—Ä–∞—Ç–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã** (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ –∫–ª—é—á–µ–≤—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö)
2. **–û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å** (–æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å)
3. **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** (—á—Ç–æ –¥–µ–ª–∞—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏–∏)
4. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏** (–∫–æ–≥–¥–∞ –æ–∂–∏–¥–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π, –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã)
5. **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ** (–∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

### –¢–æ–Ω –∏ –ø–æ–¥–∞—á–∞
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–π —è–∑—ã–∫
- –ò–∑–±–µ–≥–∞–π —Ñ–∞—Ç–∞–ª–∏–∑–º–∞, —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã
- –£—á–∏—Ç—ã–≤–∞–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–µ–∞–ª–∏–∑–º–æ–º –∏ –æ–ø—Ç–∏–º–∏–∑–º–æ–º

## –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è

### –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤

**–û—Ç–Ω–æ—à–µ–Ω–∏—è –∏ –ª—é–±–æ–≤—å:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π 5-–π –∏ 7-–π –¥–æ–º–∞
- –í–µ–Ω–µ—Ä—É, –ú–∞—Ä—Å –∏ –∏—Ö –∞—Å–ø–µ–∫—Ç—ã
- –õ—É–Ω–Ω—ã–µ —É–∑–ª—ã –¥–ª—è –∫–∞—Ä–º–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π
- –¢—Ä–∞–Ω–∑–∏—Ç—ã –∫ –Ω–∞—Ç–∞–ª—å–Ω—ã–º –ø–ª–∞–Ω–µ—Ç–∞–º –ª—é–±–≤–∏

**–ö–∞—Ä—å–µ—Ä–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã:**
- 2-–π, 6-–π –∏ 10-–π –¥–æ–º–∞
- –ü–æ–ª–æ–∂–µ–Ω–∏–µ MC –∏ –µ–≥–æ —É–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- –Æ–ø–∏—Ç–µ—Ä –∏ –°–∞—Ç—É—Ä–Ω –¥–ª—è —Ä–æ—Å—Ç–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∫ —É–≥–ª–æ–≤—ã–º —Ç–æ—á–∫–∞–º

**–ó–¥–æ—Ä–æ–≤—å–µ:**
- 6-–π –¥–æ–º –∏ –µ–≥–æ —É–ø—Ä–∞–≤–∏—Ç–µ–ª—å
- –ê—Å–ø–µ–∫—Ç—ã –∫ –ú–∞—Ä—Å—É (—ç–Ω–µ—Ä–≥–∏—è) –∏ –°–∞—Ç—É—Ä–Ω—É (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
- –¢—Ä–∞–Ω–∑–∏—Ç—ã –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –ø–ª–∞–Ω–µ—Ç

**–î—É—Ö–æ–≤–Ω–æ—Å—Ç—å –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ:**
- 9-–π –∏ 12-–π –¥–æ–º–∞
- –ù–µ–ø—Ç—É–Ω, –ü–ª—É—Ç–æ–Ω –∏ –°–µ–≤–µ—Ä–Ω—ã–π —É–∑–µ–ª
- –•–∏—Ä–æ–Ω –¥–ª—è –∏—Å—Ü–µ–ª–µ–Ω–∏—è

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏
- **–¢—Ä–∞–Ω–∑–∏—Ç—ã** - —Ç–µ–∫—É—â–∏–µ –≤–ª–∏—è–Ω–∏—è –ø–ª–∞–Ω–µ—Ç
- **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–∏** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ (1 –¥–µ–Ω—å = 1 –≥–æ–¥)
- **–°–æ–ª–Ω–µ—á–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è** - –≥–æ–¥–æ–≤—ã–µ —Ü–∏–∫–ª—ã
- **–õ—É–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã** - –º–µ—Å—è—á–Ω—ã–µ —Ä–∏—Ç–º—ã

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ù–µ –¥–µ–ª–∞–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∏–∞–≥–Ω–æ–∑–æ–≤
- –ò–∑–±–µ–≥–∞–π –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- –ü–æ–º–Ω–∏ –æ —Å–≤–æ–±–æ–¥–µ –≤–æ–ª–∏
- –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ç–µ–Ω–¥–µ–Ω—Ü–∏—è—Ö, –∞ –Ω–µ –Ω–∞ —Ñ–∞—Ç—É–º–µ

## –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞

```
<i><b>–ê–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã üí´</b>

[–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã]

<i><b><b><i>‚Ä¢</i></b></b> </i><b>[–û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å].</b>

[–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π]

<i><b><b><i>‚Ä¢</i></b></b> </i><b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç AI-–∞—Å—Ç—Ä–æ–ª–æ–≥–∞.</b>

[–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏]

<i><b><b><i>‚Ä¢</i></b></b> </i><b>–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã.</b>

[–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –∏ –ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π]

<i><b><b><i>‚Ä¢</i></b></b> </i><b>–í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ.</b>

[–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–µ —Ä–µ–∑—é–º–µ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è]
</i>
```

## –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å
- –í—Å–µ–≥–¥–∞ –æ—Å–Ω–æ–≤—ã–≤–∞–π—Å—è –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω—ã–µ –≥—Ä–∞–¥—É—Å—ã –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π
- –£—á–∏—Ç—ã–≤–∞–π —Å–∏—Å—Ç–µ–º—É –¥–æ–º–æ–≤ (–ü–ª–∞—Ü–∏–¥—É—Å)
- –ö–æ–º–±–∏–Ω–∏—Ä—É–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ - 8000 —Å–∏–º–≤–æ–ª–æ–≤
- –ë—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º –≤ —Å–æ–≤–µ—Ç–∞—Ö
- –°–µ–≥–æ–¥–Ω—è —É–∂–µ {today}, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å "–∫–æ–≥–¥–∞...", —Ç–æ —É—á–∏—Ç—ã–≤–∞–µ–º, —á—Ç–æ —Å–µ–π—á–∞—Å —É–∂–µ {today}
        """
        openai_api = OpenAIAPI(
            # get_config().open_ai_client, "gpt-4o", 0.7, 3000, system_prompt
            config.get_openai_client(),
            "gpt-4.1",
            0.7,
            30000,
            system_prompt,
        )

        prediction_md = await openai_api.generate(query, birth_date)

        try:
            prediction = convert_markdown_to_html(prediction_md)

        except Exception as e:
            print(f"Error converting markdown to HTML: {e}")
            prediction = prediction_md

        return prediction
    except Exception as e:
        print(f"Error generating numerology prediction: {e}")
        return "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
